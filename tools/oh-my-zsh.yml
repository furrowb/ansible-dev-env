---
- name: Check if oh-my-zsh exists
  stat:
    path: "{{ ansible_env.HOME }}/.oh-my-zsh"
  register: check_ohmyzsh
- name: Use zsh
  command: zsh
  when: check_ohmyzsh.stat.exists == False
- name: Install oh-my-zsh
  command: zsh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh | tac | tac | tail)"
  when: check_ohmyzsh.stat.exists == False
  register: install_ohmyzsh
- debug:
    var: install_ohmyzsh
- name: Install bullet-train theme
  get_url:
    url: http://raw.github.com/caiogondim/bullet-train-oh-my-zsh-theme/master/bullet-train.zsh-theme
    dest: "{{ ansible_env.HOME }}/.oh-my-zsh/themes/bullet-train.zsh-theme"
  when: check_ohmyzsh.stat.exists == False